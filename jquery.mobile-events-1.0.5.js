/*jQuery Mobile Events by Ben Major (lincweb - www.lincweb.co.uk) Copyright 2011-2015, Ben Major Licensed under the MIT License*/
"use strict";!function(e){e.attrFn=e.attrFn||{};var t=navigator.userAgent.toLowerCase(),a=t.indexOf("chrome")>-1&&(t.indexOf("windows")>-1||t.indexOf("macintosh")>-1||t.indexOf("linux")>-1)&&t.indexOf("mobile")<0&&t.indexOf("android")<0,o={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,touch_capable:"ontouchstart"in window&&!a,orientation_support:"orientation"in window&&"onorientationchange"in window,startevent:"ontouchstart"in window&&!a?"touchstart":"mousedown",endevent:"ontouchstart"in window&&!a?"touchend":"mouseup",moveevent:"ontouchstart"in window&&!a?"touchmove":"mousemove",tapevent:"ontouchstart"in window&&!a?"tap":"click",scrollevent:"ontouchstart"in window&&!a?"touchmove":"scroll",hold_timer:null,tap_timer:null};e.isTouchCapable=function(){return o.touch_capable},e.getStartEvent=function(){return o.startevent},e.getEndEvent=function(){return o.endevent},e.getMoveEvent=function(){return o.moveevent},e.getTapEvent=function(){return o.tapevent},e.getScrollEvent=function(){return o.scrollevent},e.each(["tapstart","tapend","tapmove","tap","tap2","tap3","tap4","singletap","doubletap","taphold","swipe","swipeup","swiperight","swipedown","swipeleft","swipeend","scrollstart","scrollend","orientationchange"],function(t,a){e.fn[a]=function(e){return e?this.on(a,e):this.trigger(a)},e.attrFn[a]=!0}),e.event.special.tapstart={setup:function(){var t=this,a=e(t);a.on(o.startevent,function e(n){if(a.data("callee",e),n.which&&1!==n.which)return!1;var i=n.originalEvent,r={position:{x:o.touch_capable?i.touches[0].screenX:n.screenX,y:o.touch_capable?i.touches[0].screenY:n.screenY},offset:{x:o.touch_capable?Math.round(i.changedTouches[0].pageX-a.offset().left):Math.round(n.pageX-a.offset().left),y:o.touch_capable?Math.round(i.changedTouches[0].pageY-a.offset().top):Math.round(n.pageY-a.offset().top)},time:Date.now(),target:n.target};return _(t,"tapstart",n,r),!0})},remove:function(){e(this).off(o.startevent,e(this).data.callee)}},e.event.special.tapmove={setup:function(){var t=this,a=e(t);a.on(o.moveevent,function e(n){a.data("callee",e);var i=n.originalEvent,r={position:{x:o.touch_capable?i.touches[0].screenX:n.screenX,y:o.touch_capable?i.touches[0].screenY:n.screenY},offset:{x:o.touch_capable?Math.round(i.changedTouches[0].pageX-a.offset().left):Math.round(n.pageX-a.offset().left),y:o.touch_capable?Math.round(i.changedTouches[0].pageY-a.offset().top):Math.round(n.pageY-a.offset().top)},time:Date.now(),target:n.target};return _(t,"tapmove",n,r),!0})},remove:function(){e(this).off(o.moveevent,e(this).data.callee)}},e.event.special.tapend={setup:function(){var t=this,a=e(t);a.on(o.endevent,function e(n){a.data("callee",e);var i=n.originalEvent,r={position:{x:o.touch_capable?i.changedTouches[0].screenX:n.screenX,y:o.touch_capable?i.changedTouches[0].screenY:n.screenY},offset:{x:o.touch_capable?Math.round(i.changedTouches[0].pageX-a.offset().left):Math.round(n.pageX-a.offset().left),y:o.touch_capable?Math.round(i.changedTouches[0].pageY-a.offset().top):Math.round(n.pageY-a.offset().top)},time:Date.now(),target:n.target};return _(t,"tapend",n,r),!0})},remove:function(){e(this).off(o.endevent,e(this).data.callee)}},e.event.special.taphold={setup:function(){var t,a=this,n=e(a),i={x:0,y:0},r=0,c=0;n.on(o.startevent,function e(s){if(s.which&&1!==s.which)return!1;n.data("tapheld",!1),t=s.target;var h=s.originalEvent,p=Date.now(),u={x:o.touch_capable?h.touches[0].screenX:s.screenX,y:o.touch_capable?h.touches[0].screenY:s.screenY},l={x:o.touch_capable?h.touches[0].pageX-h.touches[0].target.offsetLeft:s.offsetX,y:o.touch_capable?h.touches[0].pageY-h.touches[0].target.offsetTop:s.offsetY};return i.x=s.originalEvent.targetTouches?s.originalEvent.targetTouches[0].pageX:s.pageX,i.y=s.originalEvent.targetTouches?s.originalEvent.targetTouches[0].pageY:s.pageY,r=i.x,c=i.y,o.hold_timer=window.setTimeout(function(){var d=i.x-r,g=i.y-c;if(s.target==t&&(i.x==r&&i.y==c||d>=-o.tap_pixel_range&&d<=o.tap_pixel_range&&g>=-o.tap_pixel_range&&g<=o.tap_pixel_range)){n.data("tapheld",!0);var f=Date.now(),v={x:o.touch_capable?h.touches[0].screenX:s.screenX,y:o.touch_capable?h.touches[0].screenY:s.screenY},w={x:o.touch_capable?Math.round(h.changedTouches[0].pageX-n.offset().left):Math.round(s.pageX-n.offset().left),y:o.touch_capable?Math.round(h.changedTouches[0].pageY-n.offset().top):Math.round(s.pageY-n.offset().top)},T={startTime:p,endTime:f,startPosition:u,startOffset:l,endPosition:v,endOffset:w,duration:f-p,target:s.target};n.data("callee1",e),_(a,"taphold",s,T)}},o.taphold_threshold),!0}).on(o.endevent,function e(){n.data("callee2",e),n.data("tapheld",!1),window.clearTimeout(o.hold_timer)}).on(o.moveevent,function e(t){n.data("callee3",e),r=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,c=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY})},remove:function(){e(this).off(o.startevent,e(this).data.callee1).off(o.endevent,e(this).data.callee2).off(o.moveevent,e(this).data.callee3)}},e.event.special.doubletap={setup:function(){var t,a,n,i=this,r=e(i),c=null,s=!1;r.on(o.startevent,function e(a){return(!a.which||1===a.which)&&(r.data("doubletapped",!1),t=a.target,r.data("callee1",e),n=a.originalEvent,c||(c={position:{x:o.touch_capable?n.touches[0].screenX:a.screenX,y:o.touch_capable?n.touches[0].screenY:a.screenY},offset:{x:o.touch_capable?Math.round(n.changedTouches[0].pageX-r.offset().left):Math.round(a.pageX-r.offset().left),y:o.touch_capable?Math.round(n.changedTouches[0].pageY-r.offset().top):Math.round(a.pageY-r.offset().top)},time:Date.now(),target:a.target}),!0)}).on(o.endevent,function e(h){var p=Date.now(),u=p-(r.data("lastTouch")||p+1);if(window.clearTimeout(a),r.data("callee2",e),u<o.doubletap_int&&h.target==t&&u>100){r.data("doubletapped",!0),window.clearTimeout(o.tap_timer);var l={position:{x:o.touch_capable?h.originalEvent.changedTouches[0].screenX:h.screenX,y:o.touch_capable?h.originalEvent.changedTouches[0].screenY:h.screenY},offset:{x:o.touch_capable?Math.round(n.changedTouches[0].pageX-r.offset().left):Math.round(h.pageX-r.offset().left),y:o.touch_capable?Math.round(n.changedTouches[0].pageY-r.offset().top):Math.round(h.pageY-r.offset().top)},time:Date.now(),target:h.target},d={firstTap:c,secondTap:l,interval:l.time-c.time};s||(_(i,"doubletap",h,d),c=null),s=!0,window.setTimeout(function(){s=!1},o.doubletap_int)}else r.data("lastTouch",p),a=window.setTimeout(function(){c=null,window.clearTimeout(a)},o.doubletap_int,[h]);r.data("lastTouch",p)})},remove:function(){e(this).off(o.startevent,e(this).data.callee1).off(o.endevent,e(this).data.callee2)}},e.event.special.singletap={setup:function(){var t=this,a=e(t),n=null,i=null,r={x:0,y:0};a.on(o.startevent,function e(t){return(!t.which||1===t.which)&&(i=Date.now(),n=t.target,a.data("callee1",e),r.x=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,r.y=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY,!0)}).on(o.endevent,function e(c){if(a.data("callee2",e),c.target==n){var s=c.originalEvent.changedTouches?c.originalEvent.changedTouches[0].pageX:c.pageX,h=c.originalEvent.changedTouches?c.originalEvent.changedTouches[0].pageY:c.pageY;o.tap_timer=window.setTimeout(function(){if(!a.data("doubletapped")&&!a.data("tapheld")&&r.x==s&&r.y==h){var e=c.originalEvent,n={position:{x:o.touch_capable?e.changedTouches[0].screenX:c.screenX,y:o.touch_capable?e.changedTouches[0].screenY:c.screenY},offset:{x:o.touch_capable?Math.round(e.changedTouches[0].pageX-a.offset().left):Math.round(c.pageX-a.offset().left),y:o.touch_capable?Math.round(e.changedTouches[0].pageY-a.offset().top):Math.round(c.pageY-a.offset().top)},time:Date.now(),target:c.target};n.time-i<o.taphold_threshold&&_(t,"singletap",c,n)}},o.doubletap_int)}})},remove:function(){e(this).off(o.startevent,e(this).data.callee1).off(o.endevent,e(this).data.callee2)}},e.event.special.tap={setup:function(){var t,a,n=this,i=e(n),r=!1,c=null,s={x:0,y:0};i.on(o.startevent,function e(o){return i.data("callee1",e),(!o.which||1===o.which)&&(r=!0,s.x=o.originalEvent.targetTouches?o.originalEvent.targetTouches[0].pageX:o.pageX,s.y=o.originalEvent.targetTouches?o.originalEvent.targetTouches[0].pageY:o.pageY,t=Date.now(),c=o.target,a=o.originalEvent.targetTouches?o.originalEvent.targetTouches:[o],!0)}).on(o.endevent,function e(h){i.data("callee2",e);var p=h.originalEvent.targetTouches?h.originalEvent.changedTouches[0].pageX:h.pageX,u=h.originalEvent.targetTouches?h.originalEvent.changedTouches[0].pageY:h.pageY,l=s.x-p,d=s.y-u;if(c==h.target&&r&&Date.now()-t<o.taphold_threshold&&(s.x==p&&s.y==u||l>=-o.tap_pixel_range&&l<=o.tap_pixel_range&&d>=-o.tap_pixel_range&&d<=o.tap_pixel_range)){for(var g=h.originalEvent,f=[],v=0;v<a.length;v++){var w={position:{x:o.touch_capable?g.changedTouches[v].screenX:h.screenX,y:o.touch_capable?g.changedTouches[v].screenY:h.screenY},offset:{x:o.touch_capable?Math.round(g.changedTouches[v].pageX-i.offset().left):Math.round(h.pageX-i.offset().left),y:o.touch_capable?Math.round(g.changedTouches[v].pageY-i.offset().top):Math.round(h.pageY-i.offset().top)},time:Date.now(),target:h.target};f.push(w)}_(n,"tap",h,f)}})},remove:function(){e(this).off(o.startevent,e(this).data.callee1).off(o.endevent,e(this).data.callee2)}},e.event.special.swipe={setup:function(){var t,a=e(this),n=!1,i=!1,r={x:0,y:0},c={x:0,y:0};a.on(o.startevent,function i(s){(a=e(s.currentTarget)).data("callee1",i),r.x=s.originalEvent.targetTouches?s.originalEvent.targetTouches[0].pageX:s.pageX,r.y=s.originalEvent.targetTouches?s.originalEvent.targetTouches[0].pageY:s.pageY,c.x=r.x,c.y=r.y,n=!0;var h=s.originalEvent;t={position:{x:o.touch_capable?h.touches[0].screenX:s.screenX,y:o.touch_capable?h.touches[0].screenY:s.screenY},offset:{x:o.touch_capable?Math.round(h.changedTouches[0].pageX-a.offset().left):Math.round(s.pageX-a.offset().left),y:o.touch_capable?Math.round(h.changedTouches[0].pageY-a.offset().top):Math.round(s.pageY-a.offset().top)},time:Date.now(),target:s.target}}),a.on(o.moveevent,function s(h){var p;(a=e(h.currentTarget)).data("callee2",s),c.x=h.originalEvent.targetTouches?h.originalEvent.targetTouches[0].pageX:h.pageX,c.y=h.originalEvent.targetTouches?h.originalEvent.targetTouches[0].pageY:h.pageY;var u=a.parent().data("xthreshold")?a.parent().data("xthreshold"):a.data("xthreshold"),l=a.parent().data("ythreshold")?a.parent().data("ythreshold"):a.data("ythreshold"),d=void 0!==u&&!1!==u&&parseInt(u)?parseInt(u):o.swipe_h_threshold,g=void 0!==l&&!1!==l&&parseInt(l)?parseInt(l):o.swipe_v_threshold;if(r.y>c.y&&r.y-c.y>g&&(p="swipeup"),r.x<c.x&&c.x-r.x>d&&(p="swiperight"),r.y<c.y&&c.y-r.y>g&&(p="swipedown"),r.x>c.x&&r.x-c.x>d&&(p="swipeleft"),null!=p&&n){r.x=0,r.y=0,c.x=0,c.y=0,n=!1;var f=h.originalEvent,v={position:{x:o.touch_capable?f.touches[0].screenX:h.screenX,y:o.touch_capable?f.touches[0].screenY:h.screenY},offset:{x:o.touch_capable?Math.round(f.changedTouches[0].pageX-a.offset().left):Math.round(h.pageX-a.offset().left),y:o.touch_capable?Math.round(f.changedTouches[0].pageY-a.offset().top):Math.round(h.pageY-a.offset().top)},time:Date.now(),target:h.target},w=Math.abs(t.position.x-v.position.x),_=Math.abs(t.position.y-v.position.y),T={startEvnt:t,endEvnt:v,direction:p.replace("swipe",""),xAmount:w,yAmount:_,duration:v.time-t.time};i=!0,a.trigger("swipe",T).trigger(p,T)}}),a.on(o.endevent,function r(c){var s="";if((a=e(c.currentTarget)).data("callee3",r),i){var h=a.data("xthreshold"),p=a.data("ythreshold"),u=void 0!==h&&!1!==h&&parseInt(h)?parseInt(h):o.swipe_h_threshold,l=void 0!==p&&!1!==p&&parseInt(p)?parseInt(p):o.swipe_v_threshold,d=c.originalEvent,g={position:{x:o.touch_capable?d.changedTouches[0].screenX:c.screenX,y:o.touch_capable?d.changedTouches[0].screenY:c.screenY},offset:{x:o.touch_capable?Math.round(d.changedTouches[0].pageX-a.offset().left):Math.round(c.pageX-a.offset().left),y:o.touch_capable?Math.round(d.changedTouches[0].pageY-a.offset().top):Math.round(c.pageY-a.offset().top)},time:Date.now(),target:c.target};t.position.y>g.position.y&&t.position.y-g.position.y>l&&(s="swipeup"),t.position.x<g.position.x&&g.position.x-t.position.x>u&&(s="swiperight"),t.position.y<g.position.y&&g.position.y-t.position.y>l&&(s="swipedown"),t.position.x>g.position.x&&t.position.x-g.position.x>u&&(s="swipeleft");var f=Math.abs(t.position.x-g.position.x),v=Math.abs(t.position.y-g.position.y),w={startEvnt:t,endEvnt:g,direction:s.replace("swipe",""),xAmount:f,yAmount:v,duration:g.time-t.time};a.trigger("swipeend",w)}n=!1,i=!1})},remove:function(){e(this).off(o.startevent,e(this).data.callee1).off(o.moveevent,e(this).data.callee2).off(o.endevent,e(this).data.callee3)}},e.event.special.scrollstart={setup:function(){var t,a,n=this,i=e(n);function r(e,a){_(n,(t=a)?"scrollstart":"scrollend",e)}i.on(o.scrollevent,function e(o){i.data("callee",e),t||r(o,!0),clearTimeout(a),a=setTimeout(function(){r(o,!1)},50)})},remove:function(){e(this).off(o.scrollevent,e(this).data.callee)}};var n,i,r,c,s=e(window),h={0:!0,180:!0};if(o.orientation_support){var p=window.innerWidth||s.width(),u=window.innerHeight||s.height();r=p>u&&p-u>50,c=h[window.orientation],(r&&c||!r&&!c)&&(h={"-90":!0,90:!0})}function l(){var e=n();e!==i&&(i=e,s.trigger("orientationchange"))}e.event.special.orientationchange={setup:function(){return!o.orientation_support&&(i=n(),s.on("throttledresize",l),!0)},teardown:function(){return!o.orientation_support&&(s.off("throttledresize",l),!0)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=n(),t.apply(this,arguments)}}},e.event.special.orientationchange.orientation=n=function(){var e=document.documentElement;return(o.orientation_support?h[window.orientation]:e&&e.clientWidth/e.clientHeight<1.1)?"portrait":"landscape"},e.event.special.throttledresize={setup:function(){e(this).on("resize",v)},teardown:function(){e(this).off("resize",v)}};var d,g,f,v=function(){g=Date.now(),(f=g-w)>=250?(w=g,e(this).trigger("throttledresize")):(d&&window.clearTimeout(d),d=window.setTimeout(l,250-f))},w=0;function _(t,a,o,n){var i=o.type;o.type=a,e.event.dispatch.call(t,o,n),o.type=i}e.each({scrollend:"scrollstart",swipeup:"swipe",swiperight:"swipe",swipedown:"swipe",swipeleft:"swipe",swipeend:"swipe",tap2:"tap"},function(t,a){e.event.special[t]={setup:function(){e(this).on(a,e.noop)}}})}(jQuery);